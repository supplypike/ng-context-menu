!function(e){"use strict";e.module("ng-context-menu",[]).factory("ContextMenuService",function(){var e=null,n=null;return{getElement:function(){return e},setElement:function(n){e=n},getMenuElement:function(){return n},setMenuElement:function(e){n=e}}}).directive("contextMenu",["$document","ContextMenuService",function(n,t){return{restrict:"A",scope:{callback:"&contextMenu",disabled:"&contextMenuDisabled",closeCallback:"&contextMenuClose",marginBottom:"@contextMenuMarginBottom"},link:function(l,o,c){function u(e,t){var o,c,u,i,a,r,d=n[0].documentElement,m=(window.pageXOffset||d.scrollLeft)-(d.clientLeft||0),f=(window.pageYOffset||d.scrollTop)-(d.clientTop||0),p=t[0].scrollWidth,g=t[0].scrollHeight,b=n[0].body,M=d.clientWidth+m,x=d.clientHeight+f,E=l.marginBottom||0;t.addClass("open"),e.pageX||e.pageY?(o=e.pageX,c=e.pageY):(o=e.clientX+b.scrollLeft+d.scrollLeft,c=e.clientY+b.scrollTop+d.scrollTop),u=p+o,i=g+c,a=Math.max(o-m,0),r=Math.max(c-f,0),u>M&&(a-=u-M),i>x&&(r=r-(i-x)-E),t.css("top",r+"px"),t.css("left",a+"px"),s=!0}function i(e){e.removeClass("open"),s&&l.closeCallback(),s=!1}function a(e){!l.disabled()&&s&&27===e.keyCode&&l.$apply(function(){i(t.getMenuElement())})}function r(e){l.disabled()||!s||2===e.button&&e.target===t.getElement()||l.$apply(function(){i(t.getMenuElement())})}var s=!1;o.bind("contextmenu",function(n){l.disabled()||(null!==t.getMenuElement()&&i(t.getMenuElement()),t.setMenuElement(e.element(document.getElementById(c.target))),t.setElement(n.target),n.preventDefault(),n.stopPropagation(),l.$apply(function(){l.callback({$event:n})}),l.$apply(function(){u(n,t.getMenuElement())}))}),n.bind("keyup",a),n.bind("click",r),n.bind("contextmenu",r),l.$on("$destroy",function(){n.unbind("keyup",a),n.unbind("click",r),n.unbind("contextmenu",r)})}}}])}(window.angular);